import java.time.LocalDate

/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn more about Gradle by exploring our Samples at https://docs.gradle.org/8.11.1/samples
 * This project uses @Incubating APIs which are subject to change.
 */

println "configuration phase"
println "gradle id: ${gradle.hashCode()}"
println "root: ${rootProject.hashCode()}, ${project.hashCode()}, ${gradle.rootProject}"
println "project: ${name}"

//

task first {
    doLast {
        println "Task 1"
    }
}

task second {
    doLast {
        println "Task 2"
    }
}

task third {
    doLast {
        println "Task 3"
    }
}

task fourth(group: "dmdev") {
    doLast {
        println "Task 4"
    }
}

//fourth.dependsOn second
//second.dependsOn first
//second.finalizedBy third
fourth.dependsOn first
fourth.dependsOn second
fourth.dependsOn third

first.mustRunAfter second
// second.shouldRunAfter first


gradle.taskGraph.whenReady { TaskExecutionGraph graph ->
    println "---- Graph:"
    graph.allTasks.each {
        println "${it.name}"
    }
}

/*
gradle.taskGraph.beforeTask { Task task ->
    if (task.group=="dmdev") {
        println "Before Task : $task"
    }
}
*/

//gradle.taskGraph.whenReady { task ->
//    if (task.group=="dmdev") {
//        println "After Task : $task"
//    }
//}


defaultTasks("second")


ext {
    javaVersion = 16
    currentDate = LocalDate.now()
}


println "------All properties:"
println project.properties
println "------System:"
println System.getProperty("sys.example")
